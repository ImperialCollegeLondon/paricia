{% extends "index.html" %}
{% block content %}
{% load bootstrap4 %}
{% load static %}
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="{% static 'js_ajax.js' %}"></script>

<div class="card">
    <!-- Default panel contents -->
    <div class="card-header">
        <div class="row">
            <div class="col-lg-9">
                <h5>Formato de Importación: {{formato.for_nombre}}</h5>
            </div>
            <div class="col-lg-3">
                <a id="link_new" style="float:right" class="btn btn-info"
                   href="{% url 'formato:clasificacion_create' %}">
                    Agregar Variable</a>
            </div>
        </div>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-lg-12">
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Extensión</th>
                        <td>{{formato.ext_id}}</td>
                        <th>Marca Datalogger</th>
                        <td>{{formato.mar_id}}</td>
                    </tr>
                    <tr>
                        <th>Delimitador</th>
                        <td>{{formato.del_id}}</td>
                        <th>Fila de inicio</th>
                        <td>{{formato.for_fil_ini}}</td>
                    </tr>
                    <tr>
                        <th>Nombre</th>
                        <td>{{formato.for_nombre}}</td>
                        <th>Formato de fecha</th>
                        <td>{{formato.fec_id}}</td>
                    </tr>
                    <tr>
                        <th>Descripción</th>
                        <td>{{formato.for_descripcion}}</td>
                        <th>Columna fecha</th>
                        <td>{{formato.for_col_fecha}}</td>
                    </tr>
                    <tr>
                        <th>Ubicación</th>
                        <td>{{formato.for_ubicacion}}</td>
                        <th>Formato de hora</th>
                        <td>{{formato.hor_id}}</td>
                    </tr>
                    <tr>
                        <th>Archivo</th>
                        <td>{{formato.for_archivo}}</td>

                        <th>Columna de hora</th>
                        <td>{{formato.for_col_hora}}</td>
                    </tr>

                </table>
            </div>
        </div>
    </div><!-- end div class="card-body"-->
    {% if object_list%}
    <div class="card-body" id="div_informacion">
        <table class="table table-striped table-bordered table-sm">
            <thead>
            <tr>
                <th>Variable</th>
                <th>Columna valor</th>
                <th>Columna máximo</th>
                <th>Columna mínimo</th>
                <th>¿Acumular a 5 minutos?</th>
                <th>¿Es contador incremental?</th>
                <th>Resolución</th>
            </tr>
            </thead>
            <tbody>
            {% for item in object_list %}
            <tr>
                <td>{{ item.var_id }}</td>
                <td>{{ item.cla_valor }}</td>
                <td>{{ item.cla_maximo }}</td>
                <td>{{ item.cla_minimo }}</td>
                <td>
                    {% if item.acumular%}
                    Si
                    {% else %}
                    No
                    {% endif %}
                </td>

                <td>
                    {% if item.incremental %}
                    Si
                    {% else %}
                    No
                    {% endif %}
                </td>
                <td>{{ item.resolucion }}</td>
                <td>
                    <a class="link_update" href="{% url 'formato:clasificacion_update' item.cla_id %}">
                        <span class="far fa-edit" aria-hidden="true"></span>
                    </a>
                    <a class="link_delete" href="{% url 'formato:clasificacion_delete' item.cla_id %}">
                        <span class="far fa-trash-alt" aria-hidden="true"></span>
                    </a>
                </td>
            </tr>
            {% endfor%}
            </tbody>
        </table>

    </div><!-- end div id="div_informacion"-->
    {% else %}
    <div id="div_informacion" class="card-body">
        <div class="alert alert-warning" role="alert">
            No existe variables asociados al formato de importación
        </div>
    </div>
    {% endif %}
    <div id="div_loading" style="display:none;" class="card-body">
        <div class="col-lg-4 col-md-4 col-sm-4">&nbsp;</div>
        <div class="col-lg-4 col-md-4 col-sm-4">
            <img src="/media/loading6.gif"/>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-4">&nbsp;</div>
    </div><!-- end div id="div_loading"-->
    <div id="div_error" style="display:none;" class="card-body">
        <div class="alert alert-danger alert-dismissible" role="alert">
            Ocurrio un problema con el procesamiento de la información, por favor intentelo nuevamente
        </div>
    </div><!-- end div id="div_loading"-->


</div><!--end div class="card"-->

<a id="link_consulta" href="{% url 'formato:clasificacion_index' formato.for_id %}">
</a>
<div id="div_new" title="Agregar nueva variable">
    <form id="form_new" class="form" method="post" action="{% url 'formato:clasificacion_create' for_id %}">
        {% csrf_token %}
        {% bootstrap_form form %}
        <div class="col-lg-12">
            <button id="btn_guardar" type="button" class="btn btn-primary">
                Guardar
            </button>
            <a class="btn btn-light" href="#">Cancelar</a>
        </div>
    </form>
</div>
<div id="div_update" title="Modificar Registro">
</div>
<div id="div_delete" title="Borrar Registro">
</div>

{% endblock %}
