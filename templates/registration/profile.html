{% extends "base.html" %}
{% load django_bootstrap5 %}
{% block content %}
  <h2>Account</h2>
  <form method="post">
    {% csrf_token %}
    <div class="d-flex gap-2 mb-3">
      <button type="submit" class="btn btn-success">Save</button>
      <a href="{% url 'password_change' %}" class="btn btn-secondary">Change password</a>
    </div>
    <h4>Profile</h4>
    {% bootstrap_form profile_form layout='horizontal' %}
    <h4 class="mt-4">Thingsboard</h4>
    {% bootstrap_form thingsboard_form layout='horizontal' %}
    <div class="form-check mt-2">
      <input class="form-check-input"
             type="checkbox"
             id="thingsboard-password-toggle" />
      <label class="form-check-label" for="thingsboard-password-toggle">Show Thingsboard password</label>
    </div>
  </form>
  <script>
    (function() {
      const toggle = document.getElementById("thingsboard-password-toggle");
      const field = document.getElementById("id_thingsboard_password");
      if (!toggle || !field) {
        return;
      }
      toggle.addEventListener("change", function() {
        field.setAttribute("type", toggle.checked ? "text" : "password");
      });
    })();
  </script>
{% endblock content %}
