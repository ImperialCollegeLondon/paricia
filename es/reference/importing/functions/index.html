
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../filters/">
      
      
        <link rel="next" href="../models/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.46">
    
    
      
        <title>functions - Manual de Paricia</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../assets/stylesheets/yesplan.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#importing.functions" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Manual de Paricia" class="md-header__button md-logo" aria-label="Manual de Paricia" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Manual de Paricia
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              functions
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/en/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/es/" hreflang="es" class="md-select__link">
              Español
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ImperialCollegeLondon/paricia" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../introduction/" class="md-tabs__link">
          
  
  Guía de usuario

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../contributing/" class="md-tabs__link">
          
  
  Guía de desarrollo

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Manual de Paricia" class="md-nav__button md-logo" aria-label="Manual de Paricia" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Manual de Paricia
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ImperialCollegeLondon/paricia" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Guía de usuario
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Guía de usuario
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introducción
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reports/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Informes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../permissions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Permisos
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adding_elements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Añadir elementos
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../importing_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Importar datos
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validación
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Guía de desarrollo
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Guía de desarrollo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribuyendo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Instalación
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quality_assurance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Control de calidad
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../synthetic_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Datos sinteticos
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../admin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Administradores
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Estructura del código
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Estructura del código
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Applications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Índice
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Applications/formatting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Formatear
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Applications/variable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Variables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Applications/sensor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sensores
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Applications/station/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Estationes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Applications/measurement/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mediciones
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Applications/importing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Importación
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" checked>
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../djangomain/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    djangomain
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_1" id="__nav_2_7_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_1">
            <span class="md-nav__icon md-icon"></span>
            djangomain
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../djangomain/asgi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    asgi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_1_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../djangomain/dash_apps/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    dash_apps
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_1_2" id="__nav_2_7_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_7_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_1_2">
            <span class="md-nav__icon md-icon"></span>
            dash_apps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../djangomain/dash_apps/stations_map/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stations_map
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../djangomain/middleware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    middleware
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../djangomain/renderers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    renderers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_1_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../djangomain/settings/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    settings
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_1_5" id="__nav_2_7_1_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_7_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_1_5">
            <span class="md-nav__icon md-icon"></span>
            settings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../djangomain/settings/production/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    production
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../djangomain/settings/settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    settings
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../djangomain/urls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    urls
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../djangomain/views/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    views
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../djangomain/wsgi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    wsgi
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../formatting/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    formatting
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_2" id="__nav_2_7_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_2">
            <span class="md-nav__icon md-icon"></span>
            formatting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../formatting/admin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    admin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../formatting/apps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    apps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../formatting/filters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    filters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../formatting/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_2_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../formatting/signals/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    signals
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_2_5" id="__nav_2_7_2_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_7_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_2_5">
            <span class="md-nav__icon md-icon"></span>
            signals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../formatting/signals/handlers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    handlers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../formatting/tables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../formatting/urls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    urls
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../formatting/views/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    views
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    importing
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_3" id="__nav_2_7_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_7_3">
            <span class="md-nav__icon md-icon"></span>
            importing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    admin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../apps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    apps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../filters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    filters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    functions
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    functions
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#importing.functions" class="md-nav__link">
    <span class="md-ellipsis">
      functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.one_second" class="md-nav__link">
    <span class="md-ellipsis">
      one_second
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.unix_epoch" class="md-nav__link">
    <span class="md-ellipsis">
      unix_epoch
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Classification" class="md-nav__link">
    <span class="md-ellipsis">
      Classification
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Classification-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Classification.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Classification.clean" class="md-nav__link">
    <span class="md-ellipsis">
      clean
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Classification.get_absolute_url" class="md-nav__link">
    <span class="md-ellipsis">
      get_absolute_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.DataImport" class="md-nav__link">
    <span class="md-ellipsis">
      DataImport
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DataImport">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.DataImport-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.DataImport.clean" class="md-nav__link">
    <span class="md-ellipsis">
      clean
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Format" class="md-nav__link">
    <span class="md-ellipsis">
      Format
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Format">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Format-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Format.datetime_format" class="md-nav__link">
    <span class="md-ellipsis">
      datetime_format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Format-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Format.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Format.datetime_columns" class="md-nav__link">
    <span class="md-ellipsis">
      datetime_columns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Format.get_absolute_url" class="md-nav__link">
    <span class="md-ellipsis">
      get_absolute_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Measurement" class="md-nav__link">
    <span class="md-ellipsis">
      Measurement
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Measurement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Measurement-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Measurement.overwritten" class="md-nav__link">
    <span class="md-ellipsis">
      overwritten
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Measurement.raws" class="md-nav__link">
    <span class="md-ellipsis">
      raws
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Measurement-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Measurement.clean" class="md-nav__link">
    <span class="md-ellipsis">
      clean
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Report" class="md-nav__link">
    <span class="md-ellipsis">
      Report
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Report">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Report-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Report.clean" class="md-nav__link">
    <span class="md-ellipsis">
      clean
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Station" class="md-nav__link">
    <span class="md-ellipsis">
      Station
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Station">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Station-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Station.variables_list" class="md-nav__link">
    <span class="md-ellipsis">
      variables_list
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Station-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Station.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Station.get_absolute_url" class="md-nav__link">
    <span class="md-ellipsis">
      get_absolute_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Station.set_object_permissions" class="md-nav__link">
    <span class="md-ellipsis">
      set_object_permissions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.construct_matrix" class="md-nav__link">
    <span class="md-ellipsis">
      construct_matrix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.get_last_uploaded_date" class="md-nav__link">
    <span class="md-ellipsis">
      get_last_uploaded_date
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.process_datetime_columns" class="md-nav__link">
    <span class="md-ellipsis">
      process_datetime_columns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.read_data_to_import" class="md-nav__link">
    <span class="md-ellipsis">
      read_data_to_import
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.read_file_csv" class="md-nav__link">
    <span class="md-ellipsis">
      read_file_csv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.read_file_excel" class="md-nav__link">
    <span class="md-ellipsis">
      read_file_excel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.save_temp_data_to_permanent" class="md-nav__link">
    <span class="md-ellipsis">
      save_temp_data_to_permanent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.standardise_datetime" class="md-nav__link">
    <span class="md-ellipsis">
      standardise_datetime
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.standardise_float" class="md-nav__link">
    <span class="md-ellipsis">
      standardise_float
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.standardise_float_comma" class="md-nav__link">
    <span class="md-ellipsis">
      standardise_float_comma
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.validate_dates" class="md-nav__link">
    <span class="md-ellipsis">
      validate_dates
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_3_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../signals/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    signals
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_3_6" id="__nav_2_7_3_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_7_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_3_6">
            <span class="md-nav__icon md-icon"></span>
            signals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../signals/handlers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    handlers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tasks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../urls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    urls
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../views/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    views
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../management/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    management
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_4" id="__nav_2_7_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_4">
            <span class="md-nav__icon md-icon"></span>
            management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../management/admin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    admin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../management/apps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    apps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../management/filters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    filters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../management/forms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    forms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../management/initial_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    initial_data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../management/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../management/permissions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    permissions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../management/serializers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    serializers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../management/tests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tests
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../management/tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../management/views/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    views
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../measurement/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    measurement
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_5" id="__nav_2_7_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_5">
            <span class="md-nav__icon md-icon"></span>
            measurement
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../measurement/admin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    admin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../measurement/apps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    apps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_5_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../measurement/dash_apps/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    dash_apps
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_5_3" id="__nav_2_7_5_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_7_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_5_3">
            <span class="md-nav__icon md-icon"></span>
            dash_apps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../measurement/dash_apps/daily_validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    daily_validation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../measurement/dash_apps/data_report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    data_report
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../measurement/dash_apps/plots/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    plots
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../measurement/dash_apps/tables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tables
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../measurement/filters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    filters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../measurement/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../measurement/reporting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reporting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_5_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../measurement/signals/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    signals
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_5_7" id="__nav_2_7_5_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_7_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_5_7">
            <span class="md-nav__icon md-icon"></span>
            signals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../measurement/signals/handlers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    handlers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../measurement/urls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    urls
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../measurement/validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    validation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../measurement/views/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    views
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../sensor/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    sensor
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_6" id="__nav_2_7_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_6">
            <span class="md-nav__icon md-icon"></span>
            sensor
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sensor/admin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    admin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sensor/apps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    apps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sensor/filters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    filters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sensor/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_6_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../sensor/signals/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    signals
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_6_5" id="__nav_2_7_6_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_7_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_6_5">
            <span class="md-nav__icon md-icon"></span>
            signals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sensor/signals/handlers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    handlers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sensor/tables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sensor/urls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    urls
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sensor/views/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    views
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../station/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    station
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_7" id="__nav_2_7_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_7">
            <span class="md-nav__icon md-icon"></span>
            station
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../station/admin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    admin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../station/apps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    apps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../station/countries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    countries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../station/filters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    filters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../station/functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../station/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_7_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../station/signals/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    signals
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_7_7" id="__nav_2_7_7_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_7_7_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_7_7">
            <span class="md-nav__icon md-icon"></span>
            signals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../station/signals/handlers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    handlers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../station/tables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../station/timezones/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    timezones
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../station/urls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    urls
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../station/views/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    views
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../utilities/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    utilities
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_8" id="__nav_2_7_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_8">
            <span class="md-nav__icon md-icon"></span>
            utilities
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_8_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../utilities/benchmarking/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    benchmarking
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_8_1" id="__nav_2_7_8_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_7_8_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_8_1">
            <span class="md-nav__icon md-icon"></span>
            benchmarking
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/benchmarking/benchmark_queries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    benchmark_queries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/benchmarking/create_synthetic_data_scenario1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    create_synthetic_data_scenario1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/benchmarking/create_synthetic_data_scenario2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    create_synthetic_data_scenario2
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_8_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../utilities/frontend_menu/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    frontend_menu
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_8_2" id="__nav_2_7_8_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_7_8_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_8_2">
            <span class="md-nav__icon md-icon"></span>
            frontend_menu
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/frontend_menu/constants/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    constants
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/frontend_menu/context_processor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    context_processor
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/load_initial_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    load_initial_data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/timezones/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    timezones
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../variable/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    variable
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_9" id="__nav_2_7_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_9">
            <span class="md-nav__icon md-icon"></span>
            variable
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../variable/admin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    admin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../variable/apps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    apps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../variable/filters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    filters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../variable/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_9_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../variable/signals/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    signals
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_9_5" id="__nav_2_7_9_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_7_9_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_9_5">
            <span class="md-nav__icon md-icon"></span>
            signals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../variable/signals/handlers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    handlers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../variable/tables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../variable/urls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    urls
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../variable/views/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    views
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#importing.functions" class="md-nav__link">
    <span class="md-ellipsis">
      functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.one_second" class="md-nav__link">
    <span class="md-ellipsis">
      one_second
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.unix_epoch" class="md-nav__link">
    <span class="md-ellipsis">
      unix_epoch
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Classification" class="md-nav__link">
    <span class="md-ellipsis">
      Classification
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Classification-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Classification.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Classification.clean" class="md-nav__link">
    <span class="md-ellipsis">
      clean
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Classification.get_absolute_url" class="md-nav__link">
    <span class="md-ellipsis">
      get_absolute_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.DataImport" class="md-nav__link">
    <span class="md-ellipsis">
      DataImport
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DataImport">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.DataImport-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.DataImport.clean" class="md-nav__link">
    <span class="md-ellipsis">
      clean
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Format" class="md-nav__link">
    <span class="md-ellipsis">
      Format
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Format">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Format-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Format.datetime_format" class="md-nav__link">
    <span class="md-ellipsis">
      datetime_format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Format-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Format.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Format.datetime_columns" class="md-nav__link">
    <span class="md-ellipsis">
      datetime_columns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Format.get_absolute_url" class="md-nav__link">
    <span class="md-ellipsis">
      get_absolute_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Measurement" class="md-nav__link">
    <span class="md-ellipsis">
      Measurement
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Measurement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Measurement-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Measurement.overwritten" class="md-nav__link">
    <span class="md-ellipsis">
      overwritten
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Measurement.raws" class="md-nav__link">
    <span class="md-ellipsis">
      raws
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Measurement-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Measurement.clean" class="md-nav__link">
    <span class="md-ellipsis">
      clean
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Report" class="md-nav__link">
    <span class="md-ellipsis">
      Report
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Report">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Report-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Report.clean" class="md-nav__link">
    <span class="md-ellipsis">
      clean
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Station" class="md-nav__link">
    <span class="md-ellipsis">
      Station
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Station">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Station-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Station.variables_list" class="md-nav__link">
    <span class="md-ellipsis">
      variables_list
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Station-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.Station.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Station.get_absolute_url" class="md-nav__link">
    <span class="md-ellipsis">
      get_absolute_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.Station.set_object_permissions" class="md-nav__link">
    <span class="md-ellipsis">
      set_object_permissions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing.functions.construct_matrix" class="md-nav__link">
    <span class="md-ellipsis">
      construct_matrix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.get_last_uploaded_date" class="md-nav__link">
    <span class="md-ellipsis">
      get_last_uploaded_date
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.process_datetime_columns" class="md-nav__link">
    <span class="md-ellipsis">
      process_datetime_columns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.read_data_to_import" class="md-nav__link">
    <span class="md-ellipsis">
      read_data_to_import
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.read_file_csv" class="md-nav__link">
    <span class="md-ellipsis">
      read_file_csv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.read_file_excel" class="md-nav__link">
    <span class="md-ellipsis">
      read_file_excel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.save_temp_data_to_permanent" class="md-nav__link">
    <span class="md-ellipsis">
      save_temp_data_to_permanent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.standardise_datetime" class="md-nav__link">
    <span class="md-ellipsis">
      standardise_datetime
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.standardise_float" class="md-nav__link">
    <span class="md-ellipsis">
      standardise_float
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.standardise_float_comma" class="md-nav__link">
    <span class="md-ellipsis">
      standardise_float_comma
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing.functions.validate_dates" class="md-nav__link">
    <span class="md-ellipsis">
      validate_dates
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>functions</h1>

<div class="doc doc-object doc-module">



<h2 id="importing.functions" class="doc doc-heading">
            <code>importing.functions</code>


<a href="#importing.functions" class="headerlink" title="Permanent link">¤</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">





<h3 id="importing.functions-attributes">Attributes<a href="#importing.functions-attributes" class="headerlink" title="Permanent link">¤</a></h3>

<div class="doc doc-object doc-attribute">



<h4 id="importing.functions.one_second" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">one_second</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'s'</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#importing.functions.one_second" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="importing.functions.unix_epoch" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">unix_epoch</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">'s'</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#importing.functions.unix_epoch" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">
    </div>

</div>
<h3 id="importing.functions-classes">Classes<a href="#importing.functions-classes" class="headerlink" title="Permanent link">¤</a></h3>

<div class="doc doc-object doc-class">



<h4 id="importing.functions.Classification" class="doc doc-heading">
            <code>Classification</code>


<a href="#importing.functions.Classification" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="management.models.PermissionsBase" href="../../management/models/#management.models.PermissionsBase">PermissionsBase</a></code></p>


        <p>Contains instructions on how to classify the data into a specific variable.</p>
<p>In particular, it links a format to a variable, and provides the column indices for
the value, maximum, and minimum columns, as well as the validator columns. It also
contains information on whether the data is accumulated, incremental, and the
resolution of the data.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Classification.cls_id">cls_id</span></code></td>
            <td>
                  <code>AutoField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Primary key.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Classification.format">format</span></code></td>
            <td>
                  <code>ForeignKey</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The format of the data file.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Classification.variable">variable</span></code></td>
            <td>
                  <code>ForeignKey</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The variable to which the data belongs.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Classification.value">value</span></code></td>
            <td>
                  <code>PositiveSmallIntegerField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the value column, starting in 0.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Classification.maximum">maximum</span></code></td>
            <td>
                  <code>PositiveSmallIntegerField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the maximum value column, starting
in 0.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Classification.minimum">minimum</span></code></td>
            <td>
                  <code>PositiveSmallIntegerField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the minimum value column, starting
in 0.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Classification.value_validator_column">value_validator_column</span></code></td>
            <td>
                  <code>PositiveSmallIntegerField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the value validator
column, starting in 0.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Classification.value_validator_text">value_validator_text</span></code></td>
            <td>
                  <code>CharField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Value validator text.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Classification.maximum_validator_column">maximum_validator_column</span></code></td>
            <td>
                  <code>PositiveSmallIntegerField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the maximum value
validator column, starting in 0.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Classification.maximum_validator_text">maximum_validator_text</span></code></td>
            <td>
                  <code>CharField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum value validator text.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Classification.minimum_validator_column">minimum_validator_column</span></code></td>
            <td>
                  <code>PositiveSmallIntegerField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the minimum value
validator column, starting in 0.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Classification.minimum_validator_text">minimum_validator_text</span></code></td>
            <td>
                  <code>CharField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum value validator text.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Classification.accumulate">accumulate</span></code></td>
            <td>
                  <code>PositiveSmallIntegerField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If set to a number of minutes, the data
will be accumulated over that period.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Classification.resolution">resolution</span></code></td>
            <td>
                  <code>DecimalField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resolution of the data. Only used if it is to be
accumulated.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Classification.incremental">incremental</span></code></td>
            <td>
                  <code>BooleanField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the data is an incremental counter. If it
is, any value below the previous one will be removed.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Classification.decimal_comma">decimal_comma</span></code></td>
            <td>
                  <code>BooleanField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the data uses a comma as a decimal
separator.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









  <div class="doc doc-children">







<h5 id="importing.functions.Classification-functions">Functions<a href="#importing.functions.Classification-functions" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-function">


<h6 id="importing.functions.Classification.__str__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__str__</span><span class="p">()</span></code>

<a href="#importing.functions.Classification.__str__" class="headerlink" title="Permanent link">¤</a></h6>


    <div class="doc doc-contents ">

        <p>Return the string representation of the object.</p>

            <details class="quote">
              <summary>Source code in <code>formatting/models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Return the string representation of the object."""</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cls_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="importing.functions.Classification.clean" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">clean</span><span class="p">()</span></code>

<a href="#importing.functions.Classification.clean" class="headerlink" title="Permanent link">¤</a></h6>


    <div class="doc doc-contents ">

        <p>Validate the model instance.</p>
<p>It checks that the column indices are different, and that the accumulation
period is greater than zero if it is set. It also checks that the resolution is
set if the data is accumulated.</p>

            <details class="quote">
              <summary>Source code in <code>formatting/models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Validate the model instance.</span>

<span class="sd">    It checks that the column indices are different, and that the accumulation</span>
<span class="sd">    period is greater than zero if it is set. It also checks that the resolution is</span>
<span class="sd">    set if the data is accumulated.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">accumulate</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">"resolution"</span><span class="p">:</span> <span class="s2">"The resolution must be set if the data is "</span>
                <span class="s2">"accumulated."</span>
            <span class="p">}</span>
        <span class="p">)</span>

    <span class="n">col_names</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">"value"</span><span class="p">,</span>
        <span class="s2">"maximum"</span><span class="p">,</span>
        <span class="s2">"minimum"</span><span class="p">,</span>
        <span class="s2">"value_validator_column"</span><span class="p">,</span>
        <span class="s2">"maximum_validator_column"</span><span class="p">,</span>
        <span class="s2">"minimum_validator_column"</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">unique</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">unique</span><span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">names</span> <span class="ow">in</span> <span class="n">unique</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"The columns must be different."</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">({</span><span class="n">field</span><span class="p">:</span> <span class="n">msg</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">names</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="importing.functions.Classification.get_absolute_url" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_absolute_url</span><span class="p">()</span></code>

<a href="#importing.functions.Classification.get_absolute_url" class="headerlink" title="Permanent link">¤</a></h6>


    <div class="doc doc-contents ">

        <p>Get the absolute URL of the object.</p>

            <details class="quote">
              <summary>Source code in <code>formatting/models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Get the absolute URL of the object."""</span>
    <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s2">"formatting:classification_detail"</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">"pk"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="importing.functions.DataImport" class="doc doc-heading">
            <code>DataImport</code>


<a href="#importing.functions.DataImport" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="management.models.PermissionsBase" href="../../management/models/#management.models.PermissionsBase">PermissionsBase</a></code></p>


        <p>Model to store the data imports.</p>
<p>This model stores the data imports, which are files with data that are uploaded to
the system. The data is then processed asynchronously and stored in the database.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.DataImport.station">station</span></code></td>
            <td>
                  <code>ForeignKey</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Station to which the data belongs.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.DataImport.format">format</span></code></td>
            <td>
                  <code>ForeignKey</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Format of the data.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.DataImport.rawfile">rawfile</span></code></td>
            <td>
                  <code>FileField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>File with the data to be imported.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.DataImport.date">date</span></code></td>
            <td>
                  <code>DateTimeField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Date of submission of the data.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.DataImport.start_date">start_date</span></code></td>
            <td>
                  <code>DateTimeField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Start date of the data.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.DataImport.end_date">end_date</span></code></td>
            <td>
                  <code>DateTimeField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>End date of the data.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.DataImport.records">records</span></code></td>
            <td>
                  <code>IntegerField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of records in the data.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.DataImport.observations">observations</span></code></td>
            <td>
                  <code>TextField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Notes or observations about the data.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.DataImport.status">status</span></code></td>
            <td>
                  <code>TextField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Status of the import.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.DataImport.log">log</span></code></td>
            <td>
                  <code>TextField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Log of the data ingestion, indicating any errors.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.DataImport.reprocess">reprocess</span></code></td>
            <td>
                  <code>BooleanField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If checked, the data will be reprocessed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









  <div class="doc doc-children">







<h5 id="importing.functions.DataImport-functions">Functions<a href="#importing.functions.DataImport-functions" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-function">


<h6 id="importing.functions.DataImport.clean" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">clean</span><span class="p">()</span></code>

<a href="#importing.functions.DataImport.clean" class="headerlink" title="Permanent link">¤</a></h6>


    <div class="doc doc-contents ">

        <p>Validate information and uploads the measurement data.</p>

            <details class="quote">
              <summary>Source code in <code>importing/models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Validate information and uploads the measurement data."""</span>
    <span class="n">tz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">timezone</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">tz</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">"Station must have a timezone set."</span><span class="p">)</span>

    <span class="c1"># If the file has changed, we reprocess the data</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawfile</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span><span class="o">.</span><span class="n">rawfile</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reprocess</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reprocess</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s2">"N"</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reprocess</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="importing.functions.Format" class="doc doc-heading">
            <code>Format</code>


<a href="#importing.functions.Format" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="management.models.PermissionsBase" href="../../management/models/#management.models.PermissionsBase">PermissionsBase</a></code></p>


        <p>Details of the data file format, describing how to read the file.</p>
<p>It combines several properties, such as the file extension, the delimiter, the date
and time formats, and the column indices for the date and time columns, instructing
how to read the data file and parse the dates. It is mostly used to ingest data from
text files, like CSV.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Format.format_id">format_id</span></code></td>
            <td>
                  <code>AutoField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Primary key.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Format.name">name</span></code></td>
            <td>
                  <code>CharField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Short name of the format entry.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Format.description">description</span></code></td>
            <td>
                  <code>TextField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Description of the format.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Format.extension">extension</span></code></td>
            <td>
                  <code>ForeignKey</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The extension of the data file.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Format.delimiter">delimiter</span></code></td>
            <td>
                  <code>ForeignKey</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The delimiter between columns in the data file. Only
required for text files.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Format.first_row">first_row</span></code></td>
            <td>
                  <code>PositiveSmallIntegerField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the first row with data,
starting in 0.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Format.footer_rows">footer_rows</span></code></td>
            <td>
                  <code>PositiveSmallIntegerField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of footer rows to be ignored at
the end.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Format.date">date</span></code></td>
            <td>
                  <code>ForeignKey</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Format for the date column. Only required for text files.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Format.date_column">date_column</span></code></td>
            <td>
                  <code>PositiveSmallIntegerField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the date column, starting in
0.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Format.time">time</span></code></td>
            <td>
                  <code>ForeignKey</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Format for the time column. Only required for text files.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Format.time_column">time_column</span></code></td>
            <td>
                  <code>PositiveSmallIntegerField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the time column, starting in
0.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









  <div class="doc doc-children">





<h5 id="importing.functions.Format-attributes">Attributes<a href="#importing.functions.Format-attributes" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-attribute">



<h6 id="importing.functions.Format.datetime_format" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">datetime_format</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#importing.functions.Format.datetime_format" class="headerlink" title="Permanent link">¤</a></h6>


    <div class="doc doc-contents ">

        <p>Obtain the datetime format string.</p>
    </div>

</div>

<h5 id="importing.functions.Format-functions">Functions<a href="#importing.functions.Format-functions" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-function">


<h6 id="importing.functions.Format.__str__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__str__</span><span class="p">()</span></code>

<a href="#importing.functions.Format.__str__" class="headerlink" title="Permanent link">¤</a></h6>


    <div class="doc doc-contents ">

        <p>Return the string representation of the object.</p>

            <details class="quote">
              <summary>Source code in <code>formatting/models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Return the string representation of the object."""</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="importing.functions.Format.datetime_columns" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">datetime_columns</span><span class="p">(</span><span class="n">delimiter</span><span class="p">)</span></code>

<a href="#importing.functions.Format.datetime_columns" class="headerlink" title="Permanent link">¤</a></h6>


    <div class="doc doc-contents ">

        <p>Column indices that correspond to the date and time columns in the dataset.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>delimiter</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The delimiter used to split the date and time codes.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>list[int]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[int]: A list of column indices.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>formatting/models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">datetime_columns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""Column indices that correspond to the date and time columns in the dataset.</span>

<span class="sd">    Args:</span>
<span class="sd">        delimiter (str): The delimiter used to split the date and time codes.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[int]: A list of column indices.</span>
<span class="sd">    """</span>
    <span class="n">date_items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">delimiter</span><span class="p">)</span>
    <span class="n">date_cols</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">date_column</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_column</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">date_items</span><span class="p">)))</span>
    <span class="n">time_items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">delimiter</span><span class="p">)</span>
    <span class="n">time_cols</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_column</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_column</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">time_items</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">date_cols</span> <span class="o">+</span> <span class="n">time_cols</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="importing.functions.Format.get_absolute_url" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_absolute_url</span><span class="p">()</span></code>

<a href="#importing.functions.Format.get_absolute_url" class="headerlink" title="Permanent link">¤</a></h6>


    <div class="doc doc-contents ">

        <p>Get the absolute URL of the object.</p>

            <details class="quote">
              <summary>Source code in <code>formatting/models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Get the absolute URL of the object."""</span>
    <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s2">"formatting:format_detail"</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">"pk"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="importing.functions.Measurement" class="doc doc-heading">
            <code>Measurement</code>


<a href="#importing.functions.Measurement" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="measurement.models.MeasurementBase" href="../../../Applications/measurement/#measurement.models.MeasurementBase">MeasurementBase</a></code></p>


        <p>Class to store the measurements and their validation status.</p>
<p>This class holds the value of a given variable and station at a specific time, as
well as auxiliary information such as maximum and minimum values, depth and
direction, for vector quantities. All of these have a <code>raw</code> version where a backup
of the original data is kept, should this change at any point.</p>
<p>Flags to monitor its validation status, if the data is active (and therefore can be
used for reporting) and if it has actually been used for that is also included.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Measurement.depth">depth</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Depth of the measurement.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Measurement.direction">direction</span></code></td>
            <td>
                  <code>Decimal</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Direction of the measurement, useful for vector quantities.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Measurement.raw_value">raw_value</span></code></td>
            <td>
                  <code>Decimal</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Original value of the measurement.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Measurement.raw_maximum">raw_maximum</span></code></td>
            <td>
                  <code>Decimal</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Original maximum value of the measurement.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Measurement.raw_minimum">raw_minimum</span></code></td>
            <td>
                  <code>Decimal</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Original minimum value of the measurement.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Measurement.raw_direction">raw_direction</span></code></td>
            <td>
                  <code>Decimal</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Original direction of the measurement.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Measurement.raw_depth">raw_depth</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Original depth of the measurement.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Measurement.is_validated">is_validated</span></code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag to indicate if the measurement has been validated.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Measurement.is_active">is_active</span></code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag to indicate if the measurement is active. An inactive
measurement is not used for reporting</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









  <div class="doc doc-children">





<h5 id="importing.functions.Measurement-attributes">Attributes<a href="#importing.functions.Measurement-attributes" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-attribute">



<h6 id="importing.functions.Measurement.overwritten" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">overwritten</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#importing.functions.Measurement.overwritten" class="headerlink" title="Permanent link">¤</a></h6>


    <div class="doc doc-contents ">

        <p>Indicates if any of the values associated to the entry have been overwritten.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if any raw field is different to the corresponding standard
field.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h6 id="importing.functions.Measurement.raws" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">raws</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#importing.functions.Measurement.raws" class="headerlink" title="Permanent link">¤</a></h6>


    <div class="doc doc-contents ">

        <p>Return the raw fields of the measurement.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>tuple[str, ...]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[str]: Tuple with the names of the raw fields of the measurement.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
    </div>

</div>

<h5 id="importing.functions.Measurement-functions">Functions<a href="#importing.functions.Measurement-functions" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-function">


<h6 id="importing.functions.Measurement.clean" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">clean</span><span class="p">()</span></code>

<a href="#importing.functions.Measurement.clean" class="headerlink" title="Permanent link">¤</a></h6>


    <div class="doc doc-contents ">

        <p>Check consistency of validation, reporting and backs-up values.</p>

            <details class="quote">
              <summary>Source code in <code>measurement/models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Check consistency of validation, reporting and backs-up values."""</span>
    <span class="c1"># Check consistency of validation</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_validated</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_active</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">"Only validated entries can be declared as inactive."</span><span class="p">)</span>

    <span class="c1"># Backup values to raws, if needed</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">raws</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">"raw_"</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="importing.functions.Report" class="doc doc-heading">
            <code>Report</code>


<a href="#importing.functions.Report" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="measurement.models.MeasurementBase" href="../../../Applications/measurement/#measurement.models.MeasurementBase">MeasurementBase</a></code></p>


        <p>Holds the different reporting data.</p>
<p>It also keeps track of which data has already been used when creating the reports.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Report.report_type">report_type</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of report. It can be hourly, daily or monthly.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Report.completeness">completeness</span></code></td>
            <td>
                  <code>Decimal</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Completeness of the report. Eg. a daily report with 24
hourly measurements would have a completeness of 100%.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









  <div class="doc doc-children">







<h5 id="importing.functions.Report-functions">Functions<a href="#importing.functions.Report-functions" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-function">


<h6 id="importing.functions.Report.clean" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">clean</span><span class="p">()</span></code>

<a href="#importing.functions.Report.clean" class="headerlink" title="Permanent link">¤</a></h6>


    <div class="doc doc-contents ">

        <p>Validate that the report type and use of the data is consistent.</p>

            <details class="quote">
              <summary>Source code in <code>measurement/models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Validate that the report type and use of the data is consistent."""</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">report_type</span> <span class="o">==</span> <span class="n">ReportType</span><span class="o">.</span><span class="n">HOURLY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">report_type</span> <span class="o">==</span> <span class="n">ReportType</span><span class="o">.</span><span class="n">DAILY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">report_type</span> <span class="o">==</span> <span class="n">ReportType</span><span class="o">.</span><span class="n">MONTLY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
            <span class="n">day</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">hour</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="importing.functions.Station" class="doc doc-heading">
            <code>Station</code>


<a href="#importing.functions.Station" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="management.models.PermissionsBase" href="../../management/models/#management.models.PermissionsBase">PermissionsBase</a></code></p>


        <p>Main representation of a station, including several metadata.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.visibility">visibility</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Visibility level of the object, including an "internal"
option.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.station_id">station_id</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Primary key.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.station_code">station_code</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unique code for the station.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.station_name">station_name</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Brief description of the station.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.station_type">station_type</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="station.models.StationType" href="../../../Applications/station/#station.models.StationType">StationType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of the station.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.country">country</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="station.models.Country" href="../../../Applications/station/#station.models.Country">Country</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Country where the station is located.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.region">region</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="station.models.Region" href="../../../Applications/station/#station.models.Region">Region</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Region within the Country where the station is located.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.ecosystem">ecosystem</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="station.models.Ecosystem" href="../../../Applications/station/#station.models.Ecosystem">Ecosystem</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Ecosystem associated with the station.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.institution">institution</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="station.models.Institution" href="../../../Applications/station/#station.models.Institution">Institution</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Institutional partner responsible for the station.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.place_basin">place_basin</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="station.models.PlaceBasin" href="../../../Applications/station/#station.models.PlaceBasin">PlaceBasin</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Place-Basin association.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.station_state">station_state</span></code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Is the station operational?</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.timezone">timezone</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timezone of the station.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.station_latitude">station_latitude</span></code></td>
            <td>
                  <code>Decimal</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Latitude of the station, in degrees [-90 to 90].</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.station_longitude">station_longitude</span></code></td>
            <td>
                  <code>Decimal</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Longitude of the station, in degrees [-180 to 180].</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.station_altitude">station_altitude</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Altitude of the station.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.influence_km">influence_km</span></code></td>
            <td>
                  <code>Decimal</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Area of influence in km2.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.station_file">station_file</span></code></td>
            <td>
                  <code>ImageField</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Photography of the station.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.station_external">station_external</span></code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Is the station external?</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="importing.functions.Station.variables">variables</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Comma-separated list of variables measured by the station.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









  <div class="doc doc-children">





<h5 id="importing.functions.Station-attributes">Attributes<a href="#importing.functions.Station-attributes" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-attribute">



<h6 id="importing.functions.Station.variables_list" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">variables_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#importing.functions.Station.variables_list" class="headerlink" title="Permanent link">¤</a></h6>


    <div class="doc doc-contents ">

        <p>Return the list of variables measured by the station.</p>
<p>Only variables with data in the database are returned.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>list[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[str]: List of variables measured by the station.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
    </div>

</div>

<h5 id="importing.functions.Station-functions">Functions<a href="#importing.functions.Station-functions" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-function">


<h6 id="importing.functions.Station.__str__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__str__</span><span class="p">()</span></code>

<a href="#importing.functions.Station.__str__" class="headerlink" title="Permanent link">¤</a></h6>


    <div class="doc doc-contents ">

        <p>Return the station code.</p>

            <details class="quote">
              <summary>Source code in <code>station/models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Return the station code."""</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">station_code</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="importing.functions.Station.get_absolute_url" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_absolute_url</span><span class="p">()</span></code>

<a href="#importing.functions.Station.get_absolute_url" class="headerlink" title="Permanent link">¤</a></h6>


    <div class="doc doc-contents ">

        <p>Return the absolute url of the station.</p>

            <details class="quote">
              <summary>Source code in <code>station/models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Return the absolute url of the station."""</span>
    <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s2">"station:station_detail"</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">"pk"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="importing.functions.Station.set_object_permissions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_object_permissions</span><span class="p">()</span></code>

<a href="#importing.functions.Station.set_object_permissions" class="headerlink" title="Permanent link">¤</a></h6>


    <div class="doc doc-contents ">

        <p>Set object-level permissions.</p>
<p>This method is called by the save method of the model to set the object-level
permissions based on the visibility level of the object. In addition to the
standard permissions for the station, the view_measurements permission is set
which controls who can view the measurements associated to the station.</p>

            <details class="quote">
              <summary>Source code in <code>station/models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_object_permissions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Set object-level permissions.</span>

<span class="sd">    This method is called by the save method of the model to set the object-level</span>
<span class="sd">    permissions based on the visibility level of the object. In addition to the</span>
<span class="sd">    standard permissions for the station, the view_measurements permission is set</span>
<span class="sd">    which controls who can view the measurements associated to the station.</span>
<span class="sd">    """</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_object_permissions</span><span class="p">()</span>

    <span class="n">standard_group</span> <span class="o">=</span> <span class="n">Group</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"Standard"</span><span class="p">)</span>
    <span class="n">anonymous_user</span> <span class="o">=</span> <span class="n">get_anonymous_user</span><span class="p">()</span>

    <span class="c1"># Assign view_measurements permission based on permissions level</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">visibility</span> <span class="o">==</span> <span class="s2">"public"</span><span class="p">:</span>
        <span class="n">assign_perm</span><span class="p">(</span><span class="s2">"view_measurements"</span><span class="p">,</span> <span class="n">standard_group</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">assign_perm</span><span class="p">(</span><span class="s2">"view_measurements"</span><span class="p">,</span> <span class="n">anonymous_user</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">:</span>
            <span class="n">remove_perm</span><span class="p">(</span><span class="s2">"view_measurements"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">visibility</span> <span class="o">==</span> <span class="s2">"internal"</span><span class="p">:</span>
        <span class="n">assign_perm</span><span class="p">(</span><span class="s2">"view_measurements"</span><span class="p">,</span> <span class="n">standard_group</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">remove_perm</span><span class="p">(</span><span class="s2">"view_measurements"</span><span class="p">,</span> <span class="n">anonymous_user</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">:</span>
            <span class="n">remove_perm</span><span class="p">(</span><span class="s2">"view_measurements"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">visibility</span> <span class="o">==</span> <span class="s2">"private"</span><span class="p">:</span>
        <span class="n">remove_perm</span><span class="p">(</span><span class="s2">"view_measurements"</span><span class="p">,</span> <span class="n">standard_group</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">remove_perm</span><span class="p">(</span><span class="s2">"view_measurements"</span><span class="p">,</span> <span class="n">anonymous_user</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">:</span>
            <span class="n">assign_perm</span><span class="p">(</span><span class="s2">"view_measurements"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h3 id="importing.functions-functions">Functions<a href="#importing.functions-functions" class="headerlink" title="Permanent link">¤</a></h3>

<div class="doc doc-object doc-function">


<h4 id="importing.functions.construct_matrix" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">construct_matrix</span><span class="p">(</span><span class="n">matrix_source</span><span class="p">,</span> <span class="n">file_format</span><span class="p">,</span> <span class="n">station</span><span class="p">,</span> <span class="n">data_import</span><span class="p">)</span></code>

<a href="#importing.functions.construct_matrix" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">

        <p>Construct the "matrix" or results table. Does various cleaning / simple
transformations depending on the date format, type of data (accumulated,
incremental...) and deals with NANs.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>matrix_source</code>
            </td>
            <td>
                  <code><span title="django.db.models.FileField">FileField</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>raw data file path</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_format</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="formatting.models.Format" href="../../../Applications/formatting/#formatting.models.Format">Format</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a formatting.Format object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Returns: Dict of dataframes for results (one for each variable type in the raw data
    file).
TODO: Probably refactor into smaller chunks.</p>

            <details class="quote">
              <summary>Source code in <code>importing/functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">construct_matrix</span><span class="p">(</span>
    <span class="n">matrix_source</span><span class="p">:</span> <span class="n">FileField</span><span class="p">,</span>
    <span class="n">file_format</span><span class="p">:</span> <span class="n">Format</span><span class="p">,</span>
    <span class="n">station</span><span class="p">:</span> <span class="n">Station</span><span class="p">,</span>
    <span class="n">data_import</span><span class="p">:</span> <span class="n">DataImport</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""Construct the "matrix" or results table. Does various cleaning / simple</span>
<span class="sd">    transformations depending on the date format, type of data (accumulated,</span>
<span class="sd">    incremental...) and deals with NANs.</span>

<span class="sd">    Args:</span>
<span class="sd">        matrix_source: raw data file path</span>
<span class="sd">        file_format: a formatting.Format object.</span>
<span class="sd">    Returns: Dict of dataframes for results (one for each variable type in the raw data</span>
<span class="sd">        file).</span>
<span class="sd">    TODO: Probably refactor into smaller chunks.</span>
<span class="sd">    """</span>
    <span class="c1"># Get the "preformatted matrix" sorted by date col</span>
    <span class="n">matrix</span> <span class="o">=</span> <span class="n">read_data_to_import</span><span class="p">(</span><span class="n">matrix_source</span><span class="p">,</span> <span class="n">file_format</span><span class="p">,</span> <span class="n">station</span><span class="o">.</span><span class="n">timezone</span><span class="p">)</span>
    <span class="c1"># Find start and end dates from top and bottom row</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="s2">"date"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="s2">"date"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">classifications</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Classification</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">file_format</span><span class="p">))</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">classifications</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">"No classifications found for this format. Please add some."</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="n">max_cols</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">c</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">classifications</span><span class="p">])</span>
    <span class="n">ncols</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">matrix</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">max_cols</span> <span class="o">&gt;=</span> <span class="n">ncols</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">"The number of columns in the file </span><span class="si">{</span><span class="n">ncols</span><span class="si">}</span><span class="s2"> is less than the maximum column"</span>
            <span class="sa">f</span><span class="s2">" number specified in the classifications </span><span class="si">{</span><span class="n">max_cols</span><span class="si">}</span><span class="s2">. Please check the "</span>
            <span class="s2">"file and the classifications for this format."</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="n">to_ingest</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">classification</span> <span class="ow">in</span> <span class="n">classifications</span><span class="p">:</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">"date"</span><span class="p">,</span> <span class="s2">"date"</span><span class="p">))</span>

        <span class="c1"># Validation of values</span>
        <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">classification</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">classification</span><span class="o">.</span><span class="n">value_validator_column</span><span class="p">:</span>
            <span class="n">matrix</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                <span class="n">matrix</span><span class="p">[</span><span class="n">classification</span><span class="o">.</span><span class="n">value_validator_column</span><span class="p">]</span>
                <span class="o">!=</span> <span class="n">classification</span><span class="o">.</span><span class="n">value_validator_text</span><span class="p">,</span>
                <span class="n">classification</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

        <span class="c1"># Validation of maximum</span>
        <span class="k">if</span> <span class="n">classification</span><span class="o">.</span><span class="n">maximum</span><span class="p">:</span>
            <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">classification</span><span class="o">.</span><span class="n">maximum</span><span class="p">,</span> <span class="s2">"maximum"</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">classification</span><span class="o">.</span><span class="n">maximum_validator_column</span><span class="p">:</span>
                <span class="n">matrix</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                    <span class="n">matrix</span><span class="p">[</span><span class="n">classification</span><span class="o">.</span><span class="n">maximum_validator_column</span><span class="p">]</span>
                    <span class="o">!=</span> <span class="n">classification</span><span class="o">.</span><span class="n">maximum_validator_text</span><span class="p">,</span>
                    <span class="n">classification</span><span class="o">.</span><span class="n">maximum</span><span class="p">,</span>
                <span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

        <span class="c1"># Validation of minimum</span>
        <span class="k">if</span> <span class="n">classification</span><span class="o">.</span><span class="n">minimum</span><span class="p">:</span>
            <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">classification</span><span class="o">.</span><span class="n">minimum</span><span class="p">,</span> <span class="s2">"minimum"</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">classification</span><span class="o">.</span><span class="n">minimum_validator_column</span><span class="p">:</span>
                <span class="n">matrix</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                    <span class="n">matrix</span><span class="p">[</span><span class="n">classification</span><span class="o">.</span><span class="n">minimum_validator_column</span><span class="p">]</span>
                    <span class="o">!=</span> <span class="n">classification</span><span class="o">.</span><span class="n">minimum_validator_text</span><span class="p">,</span>
                    <span class="n">classification</span><span class="o">.</span><span class="n">minimum</span><span class="p">,</span>
                <span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">matrix</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">]]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">columns</span><span class="p">))</span>

        <span class="c1"># More data cleaning, column by column, deal with decimal comma vs point.</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">col</span> <span class="o">==</span> <span class="s2">"date"</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">classification</span><span class="o">.</span><span class="n">decimal_comma</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span>
                    <span class="p">[</span><span class="n">standardise_float_comma</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">],</span>
                    <span class="n">index</span><span class="o">=</span><span class="n">matrix</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span>
                    <span class="p">[</span><span class="n">standardise_float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">],</span>
                    <span class="n">index</span><span class="o">=</span><span class="n">matrix</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                <span class="p">)</span>

        <span class="c1"># Eliminate NAs</span>
        <span class="n">data_columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">column</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">columns</span> <span class="k">if</span> <span class="n">column</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">"date"</span><span class="p">]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">"all"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">data_columns</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">"Importing variable </span><span class="si">{</span><span class="n">classification</span><span class="o">.</span><span class="n">variable</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> from "</span>
                <span class="sa">f</span><span class="s2">"column </span><span class="si">{</span><span class="n">classification</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> (starting in 0) results in no valid "</span>
                <span class="s2">"data."</span>
            <span class="p">)</span>

        <span class="c1"># Deal with cumulative and incremental data</span>
        <span class="k">if</span> <span class="n">acc</span> <span class="o">:=</span> <span class="n">classification</span><span class="o">.</span><span class="n">accumulate</span><span class="p">:</span>
            <span class="c1"># assumes that if incremental it only works with VALUE</span>
            <span class="c1"># (MAXIMUM and MINIMUM are excluded)</span>
            <span class="k">if</span> <span class="n">classification</span><span class="o">.</span><span class="n">incremental</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">"value"</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">"value"</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span>
                <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">"value"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">"date"</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">"date"</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                    <span class="n">minute</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">minute</span> <span class="o">/</span> <span class="n">acc</span><span class="p">)</span> <span class="o">*</span> <span class="n">acc</span><span class="p">,</span>
                    <span class="n">second</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                    <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                    <span class="n">nanosecond</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">"date"</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">"date"</span><span class="p">]</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="n">acc</span><span class="p">)</span>
            <span class="n">count</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"date"</span><span class="p">)[</span><span class="s2">"value"</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">count</span><span class="p">[</span><span class="s2">"value"</span><span class="p">]</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">classification</span><span class="o">.</span><span class="n">resolution</span><span class="p">)</span>

            <span class="n">start_date</span> <span class="o">=</span> <span class="n">start_date</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="n">minute</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="o">.</span><span class="n">minute</span> <span class="o">/</span> <span class="n">acc</span><span class="p">)</span> <span class="o">*</span> <span class="n">acc</span><span class="p">,</span>
                <span class="n">second</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">nanosecond</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="p">)</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="n">acc</span><span class="p">)</span>
            <span class="n">end_date</span> <span class="o">=</span> <span class="n">end_date</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="n">minute</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">end_date</span><span class="o">.</span><span class="n">minute</span> <span class="o">/</span> <span class="n">acc</span><span class="p">)</span> <span class="o">*</span> <span class="n">acc</span><span class="p">,</span>
                <span class="n">second</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">nanosecond</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="p">)</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="n">acc</span><span class="p">)</span>
            <span class="n">table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span>
                <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">acc</span><span class="si">}</span><span class="s2">min"</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">"date"</span>
            <span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">table</span><span class="p">,</span> <span class="n">data</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Deal with non cumulative but incremental data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">classification</span><span class="o">.</span><span class="n">incremental</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">"value"</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">"value"</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span>
                <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">"value"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">classification</span><span class="o">.</span><span class="n">resolution</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">"value"</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">"value"</span><span class="p">]</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">classification</span><span class="o">.</span><span class="n">resolution</span><span class="p">)</span>

        <span class="n">data</span><span class="p">[</span><span class="s2">"station_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">station</span><span class="o">.</span><span class="n">station_id</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">"variable_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">classification</span><span class="o">.</span><span class="n">variable</span><span class="o">.</span><span class="n">variable_id</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">"data_import_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_import</span><span class="o">.</span><span class="n">data_import_id</span>

        <span class="c1"># Add the data to the main list</span>
        <span class="n">to_ingest</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">to_ingest</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="importing.functions.get_last_uploaded_date" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_last_uploaded_date</span><span class="p">(</span><span class="n">station_id</span><span class="p">,</span> <span class="n">var_code</span><span class="p">)</span></code>

<a href="#importing.functions.get_last_uploaded_date" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">

        <p>Get the last date of uploaded data for a given station ID and variable code.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>station_id</code>
            </td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The station ID.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var_code</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The variable code.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="datetime.datetime">datetime</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The last date that data was uploaded for the given station ID and variable code</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="datetime.datetime">datetime</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>or None if no data was found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>importing/functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_last_uploaded_date</span><span class="p">(</span><span class="n">station_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">var_code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Get the last date of uploaded data for a given station ID and variable code.</span>

<span class="sd">    Args:</span>
<span class="sd">        station_id: The station ID.</span>
<span class="sd">        var_code: The variable code.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The last date that data was uploaded for the given station ID and variable code</span>
<span class="sd">        or None if no data was found.</span>
<span class="sd">    """</span>
    <span class="n">query</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Measurement</span><span class="o">.</span><span class="n">timescale</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">station__station_id</span><span class="o">=</span><span class="n">station_id</span><span class="p">,</span> <span class="n">variable__variable_code</span><span class="o">=</span><span class="n">var_code</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">"time"</span><span class="p">)</span>
        <span class="o">.</span><span class="n">last</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">query</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">query</span><span class="o">.</span><span class="n">time</span>

    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="importing.functions.process_datetime_columns" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_datetime_columns</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">file_format</span><span class="p">,</span> <span class="n">timezone</span><span class="p">)</span></code>

<a href="#importing.functions.process_datetime_columns" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">

        <p>Process the datetime columns in a DataFrame.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The DataFrame to process.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_format</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="formatting.models.Format" href="../../../Applications/formatting/#formatting.models.Format">Format</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file format.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timezone</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timezone to use.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The DataFrame with the datetime columns processed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>importing/functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_datetime_columns</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">file_format</span><span class="p">:</span> <span class="n">Format</span><span class="p">,</span> <span class="n">timezone</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Process the datetime columns in a DataFrame.</span>

<span class="sd">    Args:</span>
<span class="sd">        data: The DataFrame to process.</span>
<span class="sd">        file_format: The file format.</span>
<span class="sd">        timezone: The timezone to use.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The DataFrame with the datetime columns processed.</span>
<span class="sd">    """</span>
    <span class="n">tz</span> <span class="o">=</span> <span class="n">zoneinfo</span><span class="o">.</span><span class="n">ZoneInfo</span><span class="p">(</span><span class="n">timezone</span><span class="p">)</span>
    <span class="n">dt_format</span> <span class="o">=</span> <span class="n">file_format</span><span class="o">.</span><span class="n">datetime_format</span>
    <span class="k">if</span> <span class="n">file_format</span><span class="o">.</span><span class="n">date_column</span> <span class="o">==</span> <span class="n">file_format</span><span class="o">.</span><span class="n">time_column</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">"date"</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">standardise_datetime</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">dt_format</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">file_format</span><span class="o">.</span><span class="n">date_column</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
            <span class="p">],</span>
            <span class="n">index</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="n">file_format</span><span class="o">.</span><span class="n">datetime_columns</span><span class="p">(</span><span class="n">file_format</span><span class="o">.</span><span class="n">delimiter</span><span class="o">.</span><span class="n">character</span><span class="p">)</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">"datetime_str"</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">cols</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="s2">" "</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span>
        <span class="p">)</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">"date"</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">"datetime_str"</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">standardise_datetime</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">dt_format</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">"datetime_str"</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">"date"</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="importing.functions.read_data_to_import" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">read_data_to_import</span><span class="p">(</span><span class="n">source_file</span><span class="p">,</span> <span class="n">file_format</span><span class="p">,</span> <span class="n">timezone</span><span class="p">)</span></code>

<a href="#importing.functions.read_data_to_import" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">

        <p>Reads the data from file into a pandas DataFrame.</p>
<p>Works out what sort of file is being read and adds standardised columns for
datetime.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>source_file</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Stream of data to be parsed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_format</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="formatting.models.Format" href="../../../Applications/formatting/#formatting.models.Format">Format</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Format of the data to be parsed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timezone</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timezone name, eg. 'America/Chicago'.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pandas.DataFrame with raw data read and extra column(s) for datetime</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>correctly parsed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>importing/functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">read_data_to_import</span><span class="p">(</span><span class="n">source_file</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">file_format</span><span class="p">:</span> <span class="n">Format</span><span class="p">,</span> <span class="n">timezone</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Reads the data from file into a pandas DataFrame.</span>

<span class="sd">    Works out what sort of file is being read and adds standardised columns for</span>
<span class="sd">    datetime.</span>

<span class="sd">    Args:</span>
<span class="sd">        source_file: Stream of data to be parsed.</span>
<span class="sd">        file_format: Format of the data to be parsed.</span>
<span class="sd">        timezone: Timezone name, eg. 'America/Chicago'.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Pandas.DataFrame with raw data read and extra column(s) for datetime</span>
<span class="sd">        correctly parsed.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">file_format</span><span class="o">.</span><span class="n">extension</span><span class="o">.</span><span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">"xlsx"</span><span class="p">,</span> <span class="s2">"xlx"</span><span class="p">]:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">read_file_excel</span><span class="p">(</span><span class="n">source_file</span><span class="p">,</span> <span class="n">file_format</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">read_file_csv</span><span class="p">(</span><span class="n">source_file</span><span class="p">,</span> <span class="n">file_format</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">process_datetime_columns</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">file_format</span><span class="p">,</span> <span class="n">timezone</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="importing.functions.read_file_csv" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">read_file_csv</span><span class="p">(</span><span class="n">source_file</span><span class="p">,</span> <span class="n">file_format</span><span class="p">)</span></code>

<a href="#importing.functions.read_file_csv" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">

        <p>Reads a CSV file into a pandas DataFrame.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>source_file</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Stream of data to be parsed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_format</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="formatting.models.Format" href="../../../Applications/formatting/#formatting.models.Format">Format</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file format.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A pandas DataFrame containing the data from the file.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>importing/functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">read_file_csv</span><span class="p">(</span><span class="n">source_file</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">file_format</span><span class="p">:</span> <span class="n">Format</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Reads a CSV file into a pandas DataFrame.</span>

<span class="sd">    Args:</span>
<span class="sd">        source_file: Stream of data to be parsed.</span>
<span class="sd">        file_format: The file format.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A pandas DataFrame containing the data from the file.</span>
<span class="sd">    """</span>
    <span class="n">firstline</span> <span class="o">=</span> <span class="n">file_format</span><span class="o">.</span><span class="n">first_row</span> <span class="k">if</span> <span class="n">file_format</span><span class="o">.</span><span class="n">first_row</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="n">skipfooter</span> <span class="o">=</span> <span class="n">file_format</span><span class="o">.</span><span class="n">footer_rows</span> <span class="k">if</span> <span class="n">file_format</span><span class="o">.</span><span class="n">footer_rows</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="n">delimiter</span> <span class="o">=</span> <span class="n">file_format</span><span class="o">.</span><span class="n">delimiter</span><span class="o">.</span><span class="n">character</span>

    <span class="n">skiprows</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">firstline</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source_file</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">):</span>
        <span class="c1"># The file was uploaded as binary</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">source_file</span><span class="o">.</span><span class="n">readlines</span><span class="p">())</span>
        <span class="n">source_file</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">skiprows</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">firstline</span><span class="p">)]</span> <span class="o">+</span> <span class="p">[</span>
            <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">lines</span> <span class="o">-</span> <span class="n">skipfooter</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="n">skipfooter</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Deal with the delimiter</span>
    <span class="k">if</span> <span class="s2">"</span><span class="se">\\</span><span class="s2">x"</span> <span class="ow">in</span> <span class="n">delimiter</span><span class="p">:</span>
        <span class="n">delim_hexcode</span> <span class="o">=</span> <span class="n">delimiter</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"</span><span class="se">\\</span><span class="s2">x"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
        <span class="n">delim_intcode</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s2">"0x"</span> <span class="o">+</span> <span class="n">delim_hexcode</span><span class="p">)</span>
        <span class="n">delimiter</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="n">delim_intcode</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">delimiter</span> <span class="o">==</span> <span class="s2">" "</span><span class="p">:</span>
        <span class="n">delimiter</span> <span class="o">=</span> <span class="s2">"\s+"</span>  <span class="c1"># This is a regex for whitespace</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
        <span class="n">source_file</span><span class="p">,</span>
        <span class="n">sep</span><span class="o">=</span><span class="n">delimiter</span><span class="p">,</span>
        <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">index_col</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">skiprows</span><span class="o">=</span><span class="n">skiprows</span><span class="p">,</span>
        <span class="n">skipfooter</span><span class="o">=</span><span class="n">skipfooter</span><span class="p">,</span>
        <span class="n">encoding</span><span class="o">=</span><span class="s2">"ISO-8859-1"</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="importing.functions.read_file_excel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">read_file_excel</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">file_format</span><span class="p">)</span></code>

<a href="#importing.functions.read_file_excel" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">

        <p>Reads an Excel file into a pandas DataFrame.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>file_path</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the file to be read.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_format</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="formatting.models.Format" href="../../../Applications/formatting/#formatting.models.Format">Format</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file format.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A pandas DataFrame containing the data from the file.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>importing/functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">read_file_excel</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">file_format</span><span class="p">:</span> <span class="n">Format</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Reads an Excel file into a pandas DataFrame.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_path: The path to the file to be read.</span>
<span class="sd">        file_format: The file format.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A pandas DataFrame containing the data from the file.</span>
<span class="sd">    """</span>
    <span class="n">firstline</span> <span class="o">=</span> <span class="n">file_format</span><span class="o">.</span><span class="n">first_row</span> <span class="k">if</span> <span class="n">file_format</span><span class="o">.</span><span class="n">first_row</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="n">skipfooter</span> <span class="o">=</span> <span class="n">file_format</span><span class="o">.</span><span class="n">footer_rows</span> <span class="k">if</span> <span class="n">file_format</span><span class="o">.</span><span class="n">footer_rows</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span>
        <span class="n">file_path</span><span class="p">,</span>
        <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">skiprows</span><span class="o">=</span><span class="n">firstline</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">skipfooter</span><span class="o">=</span><span class="n">skipfooter</span><span class="p">,</span>
        <span class="n">engine</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">error_bad_lines</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">index_col</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="importing.functions.save_temp_data_to_permanent" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_temp_data_to_permanent</span><span class="p">(</span><span class="n">data_import</span><span class="p">)</span></code>

<a href="#importing.functions.save_temp_data_to_permanent" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">

        <p>Function to pass the temporary import to the final table.</p>
<p>Uses the data_import_temp object only to get all required information from its
fields.</p>
<p>This function carries out the following steps:</p>
<ul>
<li>Bulk delete of existing data between two times on a given measurement table for
the station in question.</li>
<li>Bulk create to add the new data from the uploaded file.</li>
</ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data_import_temp</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataImportTemp object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>importing/functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save_temp_data_to_permanent</span><span class="p">(</span>
    <span class="n">data_import</span><span class="p">:</span> <span class="n">DataImport</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="n">datetime</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""Function to pass the temporary import to the final table.</span>

<span class="sd">    Uses the data_import_temp object only to get all required information from its</span>
<span class="sd">    fields.</span>

<span class="sd">    This function carries out the following steps:</span>

<span class="sd">    - Bulk delete of existing data between two times on a given measurement table for</span>
<span class="sd">    the station in question.</span>
<span class="sd">    - Bulk create to add the new data from the uploaded file.</span>

<span class="sd">    Args:</span>
<span class="sd">        data_import_temp: DataImportTemp object.</span>
<span class="sd">    """</span>
    <span class="n">station</span> <span class="o">=</span> <span class="n">data_import</span><span class="o">.</span><span class="n">station</span>
    <span class="n">file_format</span> <span class="o">=</span> <span class="n">data_import</span><span class="o">.</span><span class="n">format</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">data_import</span><span class="o">.</span><span class="n">rawfile</span>

    <span class="c1"># Delete exiting measurements and reports for the same data_import_id</span>
    <span class="n">Measurement</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">data_import_id</span><span class="o">=</span><span class="n">data_import</span><span class="o">.</span><span class="n">data_import_id</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="n">Report</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">data_import_id</span><span class="o">=</span><span class="n">data_import</span><span class="o">.</span><span class="n">data_import_id</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>

    <span class="n">all_data</span> <span class="o">=</span> <span class="n">construct_matrix</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">file_format</span><span class="p">,</span> <span class="n">station</span><span class="p">,</span> <span class="n">data_import</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">all_data</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">"No data to import. Is the chosen format correct?"</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="n">must_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"data_import_id"</span><span class="p">,</span> <span class="s2">"station_id"</span><span class="p">,</span> <span class="s2">"variable_id"</span><span class="p">,</span> <span class="s2">"date"</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">]</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="n">all_data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"date"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="n">all_data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"date"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">num_records</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">all_data</span><span class="p">:</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">Measurement</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span> <span class="ow">or</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">must_cols</span>
        <span class="p">]</span>
        <span class="n">table</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">table</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span>
            <span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">must_cols</span><span class="p">)</span>
            <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"date"</span><span class="p">:</span> <span class="s2">"time"</span><span class="p">})</span>
        <span class="p">)</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s2">"records"</span><span class="p">)</span>
        <span class="n">variable_id</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="s2">"variable_id"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># Delete existing data between the date ranges. Needed for data not linked</span>
        <span class="c1"># to a data_import_id. Both measurements and reports are deleted.</span>
        <span class="n">Measurement</span><span class="o">.</span><span class="n">timescale</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">time__range</span><span class="o">=</span><span class="p">[</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">],</span>
            <span class="n">station_id</span><span class="o">=</span><span class="n">station</span><span class="o">.</span><span class="n">station_id</span><span class="p">,</span>
            <span class="n">variable_id</span><span class="o">=</span><span class="n">variable_id</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
        <span class="n">Report</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">time__range</span><span class="o">=</span><span class="p">[</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">],</span>
            <span class="n">station_id</span><span class="o">=</span><span class="n">station</span><span class="o">.</span><span class="n">station_id</span><span class="p">,</span>
            <span class="n">variable_id</span><span class="o">=</span><span class="n">variable_id</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>

        <span class="c1"># Bulk add new data</span>
        <span class="k">def</span> <span class="nf">create_and_clean</span><span class="p">(</span><span class="o">**</span><span class="n">record</span><span class="p">):</span>
            <span class="n">instance</span> <span class="o">=</span> <span class="n">Measurement</span><span class="p">(</span><span class="o">**</span><span class="n">record</span><span class="p">)</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">instance</span>

        <span class="n">model_instances</span> <span class="o">=</span> <span class="p">[</span><span class="n">create_and_clean</span><span class="p">(</span><span class="o">**</span><span class="n">record</span><span class="p">)</span> <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span><span class="p">]</span>

        <span class="c1"># WARNING: This is a bulk insert, so it will not call the save()</span>
        <span class="c1"># method nor send the pre_save or post_save signals for each instance.</span>
        <span class="n">Measurement</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">bulk_create</span><span class="p">(</span><span class="n">model_instances</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="n">num_records</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="importing.functions.standardise_datetime" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">standardise_datetime</span><span class="p">(</span><span class="n">date_time</span><span class="p">,</span> <span class="n">datetime_format</span><span class="p">)</span></code>

<a href="#importing.functions.standardise_datetime" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">

        <p>Returns a datetime object in the case that date_time is not already in that form.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>date_time</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date_time to be transformed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>datetime_format</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The format that date_time is in (to be passed to
datetime.strptime()).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="datetime.datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A datetime object or None if date_time is not in a recognised format.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>importing/functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">standardise_datetime</span><span class="p">(</span><span class="n">date_time</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">datetime_format</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Returns a datetime object in the case that date_time is not already in that form.</span>

<span class="sd">    Args:</span>
<span class="sd">        date_time: The date_time to be transformed.</span>
<span class="sd">        datetime_format: The format that date_time is in (to be passed to</span>
<span class="sd">            datetime.strptime()).</span>

<span class="sd">    Returns:</span>
<span class="sd">        A datetime object or None if date_time is not in a recognised format.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">date_time</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">date_time</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">date_time</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">):</span>
        <span class="n">date_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span>
            <span class="nb">float</span><span class="p">((</span><span class="n">date_time</span> <span class="o">-</span> <span class="n">unix_epoch</span><span class="p">)</span> <span class="o">/</span> <span class="n">one_second</span><span class="p">),</span> <span class="n">tz</span><span class="o">=</span><span class="n">zoneinfo</span><span class="o">.</span><span class="n">ZoneInfo</span><span class="p">(</span><span class="s2">"UTC"</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">date_time</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">date_time</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">date_time</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">date_time</span> <span class="o">=</span> <span class="s2">" "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">date_time</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">date_time</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="n">date_time</span> <span class="o">=</span> <span class="s2">" "</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">date_time</span><span class="p">[:])])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">date_time</span> <span class="o">=</span> <span class="s2">""</span>

    <span class="c1"># Now try converting the resulting string into a datetime obj</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">_date_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">date_time</span><span class="p">,</span> <span class="n">datetime_format</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Error parsing date: </span><span class="si">{</span><span class="n">date_time</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_date_time</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="importing.functions.standardise_float" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">standardise_float</span><span class="p">(</span><span class="n">val_str</span><span class="p">)</span></code>

<a href="#importing.functions.standardise_float" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">

        <p>Removes commas from strings for numbers that use a period as a decimal separator.</p>
<p>Args: val_str: string or Number-like
Returns: val_num: float or None</p>

            <details class="quote">
              <summary>Source code in <code>importing/functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">standardise_float</span><span class="p">(</span><span class="n">val_str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Removes commas from strings for numbers that use a period as a decimal separator.</span>

<span class="sd">    Args: val_str: string or Number-like</span>
<span class="sd">    Returns: val_num: float or None</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val_str</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">val_str</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">val_str</span> <span class="o">=</span> <span class="n">val_str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">","</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
        <span class="n">val_num</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">val_str</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="n">val_num</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">val_num</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="importing.functions.standardise_float_comma" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">standardise_float_comma</span><span class="p">(</span><span class="n">val_str</span><span class="p">)</span></code>

<a href="#importing.functions.standardise_float_comma" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">

        <p>For strings representing numbers that use a comma as a decimal separator:
(i) Removes full stops
(ii) Replaces commas for full stops
Args: val_str: string or Number-like
Returns: val_num: float or None</p>

            <details class="quote">
              <summary>Source code in <code>importing/functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">standardise_float_comma</span><span class="p">(</span><span class="n">val_str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""For strings representing numbers that use a comma as a decimal separator:</span>
<span class="sd">    (i) Removes full stops</span>
<span class="sd">    (ii) Replaces commas for full stops</span>
<span class="sd">    Args: val_str: string or Number-like</span>
<span class="sd">    Returns: val_num: float or None</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val_str</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">val_str</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">val_str</span> <span class="o">=</span> <span class="n">val_str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"."</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
        <span class="n">val_str</span> <span class="o">=</span> <span class="n">val_str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">","</span><span class="p">,</span> <span class="s2">"."</span><span class="p">)</span>
        <span class="n">val_num</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">val_str</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="n">val_num</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">val_num</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="importing.functions.validate_dates" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">validate_dates</span><span class="p">(</span><span class="n">data_import</span><span class="p">)</span></code>

<a href="#importing.functions.validate_dates" class="headerlink" title="Permanent link">¤</a></h4>


    <div class="doc doc-contents ">

        <p>Verify if there already exists data for the dates of the data being imported.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data_import</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataImportFull or DataImportTemp object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple of:
result: (list of dicts): one per classification for this file format of
summary:
    dict containing information on the variable, the end date and whether
    the data exists.
overwrite: (bool) True if any of the data already exists.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>importing/functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">validate_dates</span><span class="p">(</span><span class="n">data_import</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Verify if there already exists data for the dates of the data being imported.</span>

<span class="sd">    Args:</span>
<span class="sd">        data_import: DataImportFull or DataImportTemp object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple of:</span>
<span class="sd">            result: (list of dicts): one per classification for this file format of</span>
<span class="sd">            summary:</span>
<span class="sd">                dict containing information on the variable, the end date and whether</span>
<span class="sd">                the data exists.</span>
<span class="sd">            overwrite: (bool) True if any of the data already exists.</span>
<span class="sd">    """</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="n">data_import</span><span class="o">.</span><span class="n">start_date</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="n">data_import</span><span class="o">.</span><span class="n">end_date</span>
    <span class="n">file_format</span> <span class="o">=</span> <span class="n">data_import</span><span class="o">.</span><span class="n">format_id</span>
    <span class="n">station</span> <span class="o">=</span> <span class="n">data_import</span><span class="o">.</span><span class="n">station</span>
    <span class="n">classifications</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Classification</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">file_format</span><span class="p">))</span>

    <span class="n">overwrite</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">classification</span> <span class="ow">in</span> <span class="n">classifications</span><span class="p">:</span>
        <span class="c1"># variable_code is used to select the measurmenet class</span>
        <span class="n">var_code</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">classification</span><span class="o">.</span><span class="n">variable</span><span class="o">.</span><span class="n">variable_code</span><span class="p">)</span>
        <span class="n">last_upload_date</span> <span class="o">=</span> <span class="n">get_last_uploaded_date</span><span class="p">(</span><span class="n">station</span><span class="o">.</span><span class="n">station_id</span><span class="p">,</span> <span class="n">var_code</span><span class="p">)</span>

        <span class="c1"># Check if data exists between dates)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">Measurement</span><span class="o">.</span><span class="n">timescale</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">time__range</span><span class="o">=</span><span class="p">[</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">],</span>
            <span class="n">station_id</span><span class="o">=</span><span class="n">station</span><span class="o">.</span><span class="n">station_id</span><span class="p">,</span>
            <span class="n">variable_id</span><span class="o">=</span><span class="n">classification</span><span class="o">.</span><span class="n">variable</span><span class="o">.</span><span class="n">variable_id</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">exists</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">query</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="n">overwrite</span> <span class="o">=</span> <span class="n">overwrite</span> <span class="ow">or</span> <span class="n">exists</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"variable_id"</span><span class="p">:</span> <span class="n">classification</span><span class="o">.</span><span class="n">variable</span><span class="o">.</span><span class="n">variable_id</span><span class="p">,</span>
            <span class="s2">"variable_code"</span><span class="p">:</span> <span class="n">classification</span><span class="o">.</span><span class="n">variable</span><span class="o">.</span><span class="n">variable_code</span><span class="p">,</span>
            <span class="s2">"variable_name"</span><span class="p">:</span> <span class="n">classification</span><span class="o">.</span><span class="n">variable</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">"last_upload_date"</span><span class="p">:</span> <span class="n">last_upload_date</span><span class="p">,</span>
            <span class="s2">"exists"</span><span class="p">:</span> <span class="n">exists</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">summary</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">,</span> <span class="n">overwrite</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>