{% extends "base.html" %}

{% load bootstrap4 %}
{% load static %}

{% block extralibraries %}
<link rel="stylesheet" href="{% static 'ext/fontawesome-free-5.13.0-web/css/all.min.css' %}">
<!--<link rel="stylesheet" href="{% static 'ext/bootstrap-4.4.1-dist/css/bootstrap.css' %}">-->

  <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
<!--  <link rel="stylesheet" href="/resources/demos/style.css">-->
<!--  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>-->
<!--  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>-->

<!--<script crossorigin="anonymous" src="{% static 'ext/jquery3.4.1/jquery.min.js' %}"></script>-->
<script crossorigin="anonymous" src="{% static 'ext/jquery-ui-1.12.1/jquery-ui.js' %}"></script>
<script crossorigin="anonymous" src="{% static 'ext/popper-core_v1.16.1-lts/umd/popper.min.js' %}"></script>
<!--<script crossorigin="anonymous" src="{% static 'ext/bootstrap-4.4.1-dist/js/bootstrap.min.js' %}"></script>-->
<!--<script type="text/javascript" src="{% static 'ext/DataTables/datatables.min.js' %}"></script>-->




<script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
<link href="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.css" rel="stylesheet">
<script src="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.js"></script>

<script src="https://unpkg.com/bootstrap-table@1.16.0/dist/extensions/filter-control/bootstrap-table-filter-control.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://unpkg.com/bootstrap-table@1.16.0/dist/extensions/filter-control/bootstrap-table-filter-control.css">


<!--<link rel="stylesheet" href="{% static 'ext/DataTables/datatables.min.css' %}"/>-->
<!--<link rel="stylesheet" href="{% static 'styles/global.css' %}">-->
<link rel="stylesheet" href="{% static 'styles/style.css' %}">
<script src="{% static 'scripts/global.js' %}"></script>
<script src="{% static 'validated/js_ajax2.js' %}"></script>
<script src="{% static 'validated/daily_validation.js' %}"></script>

<!--<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/dygraph/2.2.1/dygraph.min.css" />-->
<!--<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/dygraph/2.2.1/dygraph.min.js"></script>-->

<style type="text/css">
    .popup-overlay {
        visibility:hidden;
        position:fixed;
        background-size:100% 100%;
        height: 100%;
        width: 100% ;
        left: 0;
        top: 0;
        z-index: 1;
        background-color: rgb(0,0,0);
        background-color: rgba(0,0,0,0.4);
    }

    .popup-content {
        position:relative;
        margin:0 auto;
        visibility:hidden;
        height:20%;
        width:40%;
        vertical-align: middle;
    }
    .mensaje{
        vertical-align: middle;
        text-align: center;
    }
    .popup-overlay.active{visibility:visible;}
    .popup-content.active{visibility:visible;}

    .nopadding {
        padding: 0;
        margin: 0;
    }


  .right-panel {
    height: calc(100vh - 150px);
    overflow: auto;
  }

  .validation-body {
    overflow-y: hidden;
  }
</style>
<script>
$(document).ready(function() {

    $("select").addClass("use-placeholder");
    window.mostrar_label_dentro_de_select();
});
</script>
{% endblock %}


{% block content %}

<div style="height: 70px;"></div>

<!--<div class=" ">-->

    <div class="row validation-body" >
        <div class="col-md-2">
            Validation module
        </div>
        <div class="col-md-6">
            <a id="id_limpiar" class="btn btn-light" href="{% url 'validated:daily_validation' %}"><span>Clean form</span></a>
        </div>
    </div>

<div style="height: 20px;"></div>

<div class="row">
    <div class="col-md-3 left-panel">
            <form id="form_validacion" class="form" method="post" action="{% url 'validated:daily_validation' %}">

                    {% csrf_token %}
                    {% bootstrap_form form show_label=True  %}

                    <button id="btn_buscar" type="button" class="btn btn-primary">Submit</button>

            </form>
    </div>
    <div class="col-md-9 right-panel ">
        {% include "daily_validation_right_panel.html" %}











    <div class="filtro row">
        <!-- div formulario-->
        <div class="col-lg-12 col-md-12 col-sm-12">



        </div><!-- end div formulario-->


    </div>
    <div id="div_c"></div>


    <div id="div_message_fechas" class="row mt-4" style="display:none;">
        <div class="alert alert-danger alert-dismissible" role="alert">
            Ocurrio un problema con el procesamiento de la información, seleccione Fechas
        </div>
    </div>


    <div id="div_mensaje" class="filtro row" style="display:none;">
        <div class="alert alert-danger alert-dismissible" role="alert">
            Ocurrio un problema con el procesamiento de la información, por favor intentelo nuevamente
        </div>
    </div>

    <div class="row m-3">
        <div class="col"></div>
    </div>









    <div style="height: 40px;"></div>

    <div class="row m-4">
        <div class="col"></div>
    </div>



    <div id="div_lista_datos">
    </div>

    <div id="div_loading_datos" class="row" style="display:none;">
        <div class="col-lg-4 col-md-4 col-sm-4">&nbsp;</div>
        <div class="col-lg-4 col-md-4 col-sm-4">
            <img src="/static/images/loading6.gif"/>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-4">&nbsp;</div>
    </div>

    <div id="div_error_datos" class="row" style="display:none;">
        <div class="alert alert-danger alert-dismissible" role="alert">
            Ocurrio un problema con el procesamiento de la información, por favor intentelo nuevamente
        </div>
    </div>

    <!-- Modal Formulario Acumulado -->
    <div class="modal fade" id="modal_acumulado" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modal_label_promedio" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modal_label_acumulado">Modificar</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="form_acumulado">
                        <input type="hidden" name="id">
                        <div class="form-group">
                            <label class="col-form-label">Fecha:</label>
                            <input type="text" class="form-control" name="fecha" placeholder="Disabled input">
                        </div>
                        <div class="form-group">
                            <label class="col-form-label">Valor</label>
                            <input type="number" step=".1" class="form-control" name="valor" required>
                        </div>
                        <div class="form-group">
                            <label class="col-form-label">Comentario</label>
                            <input type="text" class="form-control" name="comentario" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                    <button id="btn_modificar_acumulado" name="acumulado" type="button" class="btn btn-primary">Guardar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- End Modal Formulario Acumulado -->

    <!-- Modal Formulario Promedio -->
    <div class="modal fade" id="modal_promedio" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modal_label_promedio" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modal_label_promedio">Modificar</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="form_promedio">
                        <input type="hidden" name="id">
                        <div class="form-group">
                            <label class="col-form-label">Fecha:</label>
                            <input type="text" class="form-control" name="fecha">
                        </div>
                        <div class="form-group">
                            <label class="col-form-label">Valor</label>
                            <input type="number" step=".000001" class="form-control" name="valor" required>
                        </div>
                        <div class="form-group">
                            <label class="col-form-label">Maximo</label>
                            <input type="number" step=".000001" class="form-control" name="maximo">
                        </div>
                        <div class="form-group">
                            <label class="col-form-label">Mínimo</label>
                            <input type="number" step=".000001" class="form-control" name="minimo">
                        </div>
                        <div class="form-group">
                            <label class="col-form-label">Comentario</label>
                            <input type="text" class="form-control" name="comentario" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                    <button id="btn_modificar_promedio" name="promedio" type="button" class="btn btn-primary">Guardar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- End Modal Formulario Promedio -->

    </div>
</div>



    <!-- Modal Formulario Modificar Agua -->
    <div class="modal fade" id="modal_agua" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modal_label_promedio" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Modificar</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="form_agua">
                        <input type="hidden" name="id">
                        <div class="form-group">
                            <label class="col-form-label">Fecha:</label>
                            <input type="text" class="form-control" name="fecha">
                        </div>
                        <div class="form-group">
                            <label class="col-form-label">Valor</label>
                            <input type="number" step=".000001" class="form-control" name="valor" required>
                        </div>
                        <!--div class="form-group">
                            <label class="col-form-label">Caudal</label>
                            <input type="number" step=".000001" class="form-control" name="caudal" required>
                        </!--div-->
                        <div class="form-group">
                            <label class="col-form-label">Comentario</label>
                            <input type="text" class="form-control" name="comentario" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                    <button id="btn_modificar_agua" name="agua" type="button" class="btn btn-primary">Guardar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- End Modal Formulario Modificar Agua -->




    <!-- Modal Nuevo Formulario Nuevo Acumulado -->
    <div class="modal fade" id="modal_nuevo_acumulado" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modal_label_promedio" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" >Nuevo Registro</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="form_nuevo_acumulado">
                        <input type="hidden" name="id">
                        <div class="form-group">
                            <label class="col-form-label">Fecha:</label>
                            <input type="text" class="form-control" name="fecha">
                        </div>
                        <div class="form-group">
                            <label class="col-form-label">Hora:</label>
                            <input type="time" class="form-control" name="hora" required>
                        </div>

                        <div class="form-group">
                            <label class="col-form-label">Valor</label>
                            <input type="number" step=".1" class="form-control" name="valor" required>
                        </div>
                        <div class="form-group">
                            <label class="col-form-label">Comentario</label>
                            <input type="text" class="form-control" name="comentario" required>
                        </div>
                        <div class="form-group">
                            <label class="col-form-label">Número de Fila</label>
                            <input type="number" class="form-control" name="fila" required>
                        </div>

                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                    <button id="btn_nuevo_acumulado" name="acumulado" type="button" class="btn btn-primary">Guardar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- End Modal Formulario Nuevo Acumulado -->

    <!-- Modal Formulario Nuevo Agua -->
    <div class="modal fade" id="modal_nuevo_promedio" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modal_label_promedio" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" >Nuevo Registro</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="form_nuevo_promedio">
                        <input type="hidden" name="id">
                        <div class="form-group">
                            <label class="col-form-label">Fecha:</label>
                            <input type="text" class="form-control" name="fecha">
                        </div>
                        <div class="form-group">
                            <label class="col-form-label">Hora:</label>
                            <input type="time" class="form-control" name="hora" required>
                        </div>
                        <div class="form-group">
                            <label class="col-form-label">Valor</label>
                            <input type="text" class="form-control" name="valor" required>
                        </div>
                        <!--div class="form-group">
                            <label class="col-form-label">Caudal</label>
                            <input type="text" class="form-control" name="caudal" required>
                        </!--div-->
                        <div class="form-group">
                            <label class="col-form-label">Comentario</label>
                            <input type="text" class="form-control" name="comentario" required>
                        </div>
                        <div class="form-group">
                            <label class="col-form-label">Número de Fila</label>
                            <input type="number" class="form-control" name="fila" required>
                        </div>

                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                    <button id="btn_nuevo_promedio" name="promedio" type="button" class="btn btn-primary">Guardar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- End Modal Formulario Nuevo Agua -->





    <!-- Modal Formulario Eliminar -->
    <div class="modal fade" id="modal_eliminar" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modal_label_eliminar" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modal_label_eliminar">Eliminar</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="form_eliminar">
                        <input type="hidden" name="id">
                        <input type="hidden" name="estado">
                        <div class="form-group">
                            <label class="col-form-label">Comentario</label>
                            <input id="txt_comentario_elimminar" type="text" class="form-control" name="comentario">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                    <button id="btn_eliminar_valor" name="eliminar" type="button" class="btn btn-danger">Eliminar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- End Modal Formulario Eliminar -->



    <!-- Modal Formulario Enviar Validacion -->
    <div class="modal fade" id="modal_validar" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modal_label_validad" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modal_label_validad">Modificar</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="form_validar">
                        <div class="form-group">
                            <label class="col-form-label">Comentario</label>
                            <input id="txt_comentario_validar" type="text" class="form-control" name="comentario">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                    <button id="btn_validar_comentario" name="eliminar" type="button" class="btn btn-danger">Eliminar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- End Modal Formulario Enviar Validacion -->


    <!-- Modal Mensaje Validacion -->
    <div class="modal fade" id="div_mensaje_validacion" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="div_mensaje_validacion_label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Mensaje</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div id="div_body_mensaje" class="modal-body">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- End Modal Mensaje Validacion -->

    <!-- Modal Gráfico  -->
    <div class="modal fade" id="div_modal_grafico" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Gráfico</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div id="div_grafico" class="modal-body">
                    <!-- Plotly chart will be drawn inside this DIV -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Modal Historial de Validación  -->
    <div class="modal fade" id="div_modal_historial" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Datos Validados</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Plotly chart will be drawn inside this DIV -->
                    <div id="div_loading_historial" style="display:none;">
                        <div class="d-flex align-items-center">
                            <strong>Loading...</strong>
                            <div class="spinner-border ml-auto" role="status" aria-hidden="true"></div>
                        </div>
                    </div>

                    <div id="div_historial" class="row mt-4">

                    </div>

                    <div id="div_message_historial" class="row mt-4" style="display:none;">
                        <div class="alert alert-danger alert-dismissible" role="alert">
                            Ocurrio un problema con el procesamiento de la información, por favor intentelo nuevamente
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>


    <input type="hidden" id="orig_estacion_id">
    <input type="hidden" id="orig_variable_id">
    <input type="hidden" id="orig_fecha_inicio">
    <input type="hidden" id="orig_fecha_fin">
    <input type="hidden" id="orig_lim_sup">
    <input type="hidden" id="orig_lim_inf">
    <input type="hidden" id="orig_fecha_diario">
    <input type="hidden" id="orig_id_diario">


<!--</div>-->
<div id="espacio" style="padding-bottom:200px;">

</div>
{% endblock %}
